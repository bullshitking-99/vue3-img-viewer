(function(d,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(d=typeof globalThis<"u"?globalThis:d||self,o(d.ImgViewer={},d.Vue))})(this,function(d,o){"use strict";const j="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjc3NTc1NDg4ODExIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE1MjIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTk0NCAyOTlINjkyYy00LjQgMC04IDMuNi04IDh2NDA2YzAgNC40IDMuNiA4IDggOGg1OS4yYzQuNCAwIDgtMy42IDgtOFY1NDkuOWgxNjguMmM0LjQgMCA4LTMuNiA4LThWNDk1YzAtNC40LTMuNi04LTgtOEg3NTkuMlYzNjQuMkg5NDRjNC40IDAgOC0zLjYgOC04VjMwN2MwLTQuNC0zLjYtOC04LTh6TTU4OCAzMDBoLTU2Yy00LjQgMC04IDMuNi04IDh2NDA2YzAgNC40IDMuNiA4IDggOGg1NmM0LjQgMCA4LTMuNiA4LThWMzA4YzAtNC40LTMuNi04LTgtOHpNNDUyIDUwMC45SDI5MC41Yy00LjQgMC04IDMuNi04IDh2NDMuN2MwIDQuNCAzLjYgOCA4IDhoOTQuOWwtMC4zIDguOWMtMS4yIDU4LjgtNDUuNiA5OC41LTExMC45IDk4LjUtNzYuMiAwLTEyMy45LTU5LjctMTIzLjktMTU2LjcgMC05NS44IDQ2LjgtMTU1LjIgMTIxLjUtMTU1LjIgNTQuOCAwIDkzLjEgMjYuOSAxMDguNSA3NS40aDc2LjJjLTEzLjYtODcuMi04Ni0xNDMuNC0xODQuNy0xNDMuNEMxNTAgMjg4IDcyIDM3NS4yIDcyIDUxMS45IDcyIDY1MC4yIDE0OS4xIDczNiAyNzMgNzM2YzExNC4xIDAgMTg3LTcwLjcgMTg3LTE4MS42di00NS41YzAtNC40LTMuNi04LTgtOHoiIGZpbGw9IiM1MTUxNTEiIHAtaWQ9IjE1MjMiPjwvcGF0aD48L3N2Zz4K";function D(e){const l=e.getBoundingClientRect(),{left:t,top:i,width:n}=l;return{left:t,top:i,width:n}}function _(e,l){let t;return function(...i){clearTimeout(t),t=setTimeout(()=>{e.apply(this,i)},l)}}function v(e,l,[t,i]){e==="in"&&(l.style.transform="scale(1.4)",l.style.transformOrigin=`${t}px ${i}px`),e==="out"&&(l.style.transform="scale(1)")}function z(e){e.onload=null;const l=e.src,t=e.width,i=e.height;let n,g=o.ref(!1),u=document.createElement("canvas");u.width=t,u.height=i;const s=u.getContext("2d");s==null||s.drawImage(e,0,0,t,i);const r=document.createElement("img");r.src=j,r.style.backgroundColor="gray";function y(){s==null||s.drawImage(r,(t-70)/2,(i-70)/2,70,70)}r.onload=()=>{y(),n=u.toDataURL("image/gif"),e.src=n};function N(){n&&(e.src=n,g.value=!1)}function I(){e.src=l,g.value=!0}return{stop:N,play:I,isPlay:g}}const A={id:"imgViewer"},E=["onClick","src"],O=o.defineComponent({__name:"ImgViewer",props:{scrollTop:null,gifStatic:{type:Boolean}},setup(e){const l=e,t=o.ref(!1);let i,n,g;const u=o.ref("");let s,r,y;function N(a,m){const c={left:s.left-r.left,top:s.top-r.top};let M=[{transform:`translate3d(${c.left}px, ${c.top}px,0) scale(${y})`,transformOrigin:"0 0"},{transform:"translate(0)"}];m==="close"&&(M=[M[1],M[0]]);const p={duration:300,easing:"cubic-bezier(.2,0,.2,1)"},w=a.animate(M,p);m==="close"&&w.addEventListener("finish",()=>{t.value=!1,u.value="",I=!0,i.style.visibility="visible",i.style.transition="",g.style.backgroundColor="",n.style.transform="scale(1)",n.style.transformOrigin=""})}let I=!0;function L(){t.value&&I&&(I=!1,s=D(i),g.style.backgroundColor="transparent",N(n,"close"))}const T=_(L,50);let f=null,C="in";const x=({offsetX:a,offsetY:m})=>{f?(v(C,n,[a,m]),C=C==="in"?"out":"in",clearTimeout(f),f=null):f=setTimeout(()=>{L(),f=null,n.style.transform="none"},230)};return o.watch(t,a=>{if(a){if(l.scrollTop){o.watch(l.scrollTop,T);return}window.addEventListener("scroll",T)}a||window.removeEventListener("scroll",T)}),o.onMounted(()=>{const a=Array.from(document.getElementsByTagName("img")),m=function({target:c}){i=c,u.value=i.src,s=D(i),t.value=!0};a.forEach(c=>{c.onload=function(){if(l.gifStatic&&c.src.split(".").pop()==="gif"){c.style.cursor="pointer";const{stop:p,play:w,isPlay:b}=z(c);c.addEventListener("click",()=>{b.value?p():w()});return}c.style.cursor="zoom-in",c.addEventListener("click",m)}}),g=document.getElementById("imgViewer-modal"),n=document.getElementById("imgViewer-modalImg"),n.onload=()=>{r=D(n),y=s.width/r.width,N(n,"show"),i.style.visibility="hidden"}}),(a,m)=>(o.openBlock(),o.createElementBlock("div",A,[o.createElementVNode("div",{onClick:L,id:"imgViewer-modal",class:o.normalizeClass(["modal",t.value?"modalShow":"modalClose"])},[o.createElementVNode("img",{id:"imgViewer-modalImg",onClick:o.withModifiers(x,["stop"]),src:u.value},null,8,E)],2),o.renderSlot(a.$slots,"default",{},void 0,!0)]))}}),k="",h=((e,l)=>{const t=e.__vccOpts||e;for(const[i,n]of l)t[i]=n;return t})(O,[["__scopeId","data-v-a252bf00"]]),S={install:e=>{e.component("ImgViewer",h)}};d.ImgViewer=h,d.default=S,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
