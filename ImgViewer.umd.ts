(function(r,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.ImgViewer={},r.Vue))})(this,function(r,e){"use strict";function u(o){const n=o.getBoundingClientRect(),{left:t,top:i,width:c}=n;return{left:t,top:i,width:c}}function V(o,n){let t;return function(...i){clearTimeout(t),t=setTimeout(()=>{o.apply(this,i)},n)}}function _(o){console.log(o);const{target:n}=o;n instanceof HTMLImageElement&&console.log("dbclick the img")}const h={id:"imgViewer"},v=["src"],b=e.defineComponent({__name:"ImgViewer",setup(o){const n=e.ref(!1);let t,i,c;const g=e.ref("");let a,m,w;function I(d,s){const l={left:a.left-m.left,top:a.top-m.top};let f=[{transform:`translate3d(${l.left}px, ${l.top}px,0) scale(${w})`,transformOrigin:"0 0"},{transform:"translate(0)"}];s==="close"&&(f=[f[1],f[0]]);const E={duration:300,easing:"cubic-bezier(.2,0,.2,1)"},C=d.animate(f,E);s==="close"&&C.addEventListener("finish",()=>{n.value=!1,g.value="",t.style.visibility="visible",t.style.transition="",c.style.backgroundColor=""})}const p=V(function(){n.value&&(a=u(t),c.style.backgroundColor="transparent",I(i,"close"))},20);return window.onscroll=p,e.onMounted(()=>{const d=Array.from(document.getElementsByTagName("img")),s=function({target:l}){t=l,g.value=t.src,a=u(t),n.value=!0};d.forEach(l=>{l.style.cursor="zoom-in",l.addEventListener("click",s)}),c=document.getElementById("imgViewer-modal"),i=document.getElementById("imgViewer-modalImg"),i.onload=()=>{m=u(i),w=a.width/m.width,I(i,"show"),t.style.visibility="hidden"}}),(d,s)=>(e.openBlock(),e.createElementBlock("div",h,[e.createElementVNode("div",{onClick:s[1]||(s[1]=(...l)=>e.unref(p)&&e.unref(p)(...l)),id:"imgViewer-modal",class:e.normalizeClass(["modal",n.value?"modalShow":"modalClose"])},[e.createElementVNode("img",{id:"imgViewer-modalImg",onDblclick:s[0]||(s[0]=(...l)=>e.unref(_)&&e.unref(_)(...l)),src:g.value},null,40,v)],2),e.renderSlot(d.$slots,"default",{},void 0,!0)]))}}),T="",y=((o,n)=>{const t=o.__vccOpts||o;for(const[i,c]of n)t[i]=c;return t})(b,[["__scopeId","data-v-6130d8f4"]]),k={install:o=>{o.component("ImgViewer",y)}};r.ImgViewer=y,r.default=k,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
